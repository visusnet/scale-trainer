(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(24)},16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a,c,i,o,r,l,u,s=n(0),d=n.n(s),h=n(10),m=n.n(h),p=(n(16),n(3)),f=n(4),v=n(6),b=n(5),O=n(7),j=(n(18),n(1)),g=n(2),y=n(8),M=["A","B","C","D","E","F","G"],C="\u266f",E="\u266e",k="\u266d",_=[k,C,E];function A(e){return e.pitch+((t=e.accidental)===E?"":t);var t}function w(e,t){return{pitch:e,accidental:t||E}}function x(e){var t=(M.indexOf(e)+M.length-1)%M.length;return M[t]}function H(e){var t=(M.indexOf(e)+1)%M.length;return M[t]}function W(e){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:C)===k){if(e.accidental===C)return{pitch:H(e.pitch),accidental:"B"===e.pitch||"E"===e.pitch?E:k};if(e.accidental===k&&("C"===e.pitch||"F"===e.pitch))return{pitch:x(e.pitch),accidental:E}}else{if(e.accidental===k)return{pitch:x(e.pitch),accidental:"C"===e.pitch||"F"===e.pitch?E:C};if(e.accidental===C&&("B"===e.pitch||"E"===e.pitch))return{pitch:H(e.pitch),accidental:E}}return e}function N(e,t){var n=W(e),a=W(t);return function(e,t){return e.pitch===t.pitch}(n,a)&&function(e,t){return e.accidental===t.accidental}(n,a)}var F=["P1","m2","M2","m3","M3","P4","P5","m6","M6","m7","M7","P8"],I=["d2","A1","d3","A2","d4","A3","d5","A4","d6","A5","d7","A6","d8","A7"],S={P1:0,d2:0,m2:1,A1:1,semitone:1,"half tone":1,"half step":1,H:1,M2:2,d3:2,tone:2,"whole tone":2,"whole step":2,W:2,m3:3,A2:3,M3:4,d4:4,P4:5,A3:5,d5:6,A4:6,tritone:6,P5:7,d6:7,m6:8,A5:8,M6:9,d7:9,m7:10,A6:10,M7:11,d8:11,P8:12,A7:12},Q={A:(a={},Object(j.a)(a,k,w("A")),Object(j.a)(a,E,w("A",C)),Object(j.a)(a,C,w("B")),a),B:(c={},Object(j.a)(c,k,w("B")),Object(j.a)(c,E,w("C")),Object(j.a)(c,C,w("C",C)),c),C:(i={},Object(j.a)(i,k,w("C")),Object(j.a)(i,E,w("C",C)),Object(j.a)(i,C,w("D")),i),D:(o={},Object(j.a)(o,k,w("D")),Object(j.a)(o,E,w("D",C)),Object(j.a)(o,C,w("E")),o),E:(r={},Object(j.a)(r,k,w("E")),Object(j.a)(r,E,w("F")),Object(j.a)(r,C,w("F",C)),r),F:(l={},Object(j.a)(l,k,w("F")),Object(j.a)(l,E,w("F",C)),Object(j.a)(l,C,w("G")),l),G:(u={},Object(j.a)(u,k,w("G")),Object(j.a)(u,E,w("G",C)),Object(j.a)(u,C,w("A")),u)};function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F,a=-1;return t.reduce(function(e,t){return a+=S[t],Object(g.a)(e).concat([n[a]])},[])}var D=["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian"],P={name:"harmonic minor",construction:["W","H","W","W","H","A2","H"],modes:["harmonic minor","locrian \u266f6","ionian \u266f5","dorian \u266f4","phrygian dominant","lydian \u266f2","ultralocrian"]},q={name:"melodic minor",construction:["W","H","W","W","W","W","H"],modes:["melodic minor","dorian \u266d2","lydian \u266f5","lydian \u266d7","mixolydian \u266d6","locrian \u266f2","superlocrian"]},G=[{name:"major",construction:["W","W","H","W","W","W","H"],modes:D},{name:"minor",construction:["W","H","W","W","H","W","W"],modes:D}];function R(e){return"".concat(A(e.root)," ").concat((t=e.scale,t.name)," ").concat(function(e,t){var n=t.modes.indexOf(e);return 0===n?"":"".concat(e," (mode ").concat(n+1," of ").concat(t.name,")")}(e.mode,e.scale)).trim();var t}function J(e,t){return function(e,t){var n=e.length;return e.map(function(a,c){return e[((t+c)%n+n)%n]})}(e.construction,e.modes.indexOf(t))}function L(e){return Object(g.a)(J(e.scale,e.mode).slice(0,-1).reduce(function(t,n){var a=function(e,t){for(var n="number"===typeof t?t:S[t],a=e,c=0;c<n;c++)a=Q[a.pitch][a.accidental];return a}(t[t.length-1],n);return Object(g.a)(t).concat([W(a,e.root.accidental)])},[e.root])).concat([e.root])}n(20);function U(e){var t=e.accidental,n=e.accidentalIndex,a=e.isCurrentAccidental,c=e.isRoot,i=e.noteIndex,o=e.onChange,r="note-".concat(i,"-accidental-").concat(n);return d.a.createElement("div",{className:"scaleQuestion__accidental"},d.a.createElement("label",{htmlFor:r},d.a.createElement("input",{type:"radio",id:r,name:r,value:t,checked:a,onChange:function(e,t,n){return function(){n(e,t)}}(i,t,o),disabled:c}),t))}function T(e){var t=e.isRoot,n=e.noteIndex,a=e.onChange,c=e.note;return d.a.createElement("div",{className:"scaleQuestion__note",key:"note-".concat(n)},d.a.createElement("div",{className:"scaleQuestion__pitch"},d.a.createElement("input",{type:"text",name:"note-".concat(n,"-pitch"),value:c.pitch||"",disabled:t,tabIndex:n,autoFocus:1===n,onChange:function(e,t,n){return function(a){a.preventDefault();var c={pitch:function(e){var t=e.toUpperCase();return M.includes(t)?t:""}(a.target.value.toUpperCase()),accidental:t};n(e,c)}}(n,c.accidental,a),maxLength:1})),d.a.createElement("div",{className:"scaleQuestion__accidentals"},_.map(function(e,i){return d.a.createElement(U,{key:"note-".concat(n,"-accidental-").concat(i),accidental:e,accidentalIndex:i,isCurrentAccidental:c.accidental===e,isRoot:t,noteIndex:n,onChange:function(e,t,n,a){return function(){var c={accidental:n,pitch:t};a(e,c)}}(n,c.pitch,e,a)})})))}var Y={accidental:E},$=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).state={notes:{},isAnswered:!1,isCorrect:!1,showHint:!1},n._handleAnswer=function(e){e.preventDefault(),n._canBeAnswered&&n.setState(function(e,t){var n,a,c=L(t.question.key),i=c[0],o=Object.keys(e.notes).map(function(t){return e.notes[t]}),r=[i].concat(Object(g.a)(o),[i]);return Object(y.a)({},e,{isAnswered:!0,isCorrect:(n=c,a=r,n.length===a.length&&!n.map(function(e,t){return N(e,a[t])}).some(function(e){return!e}))})})},n._handleHintClick=function(e){e.preventDefault(),n.setState(function(e){return Object(y.a)({},e,{showHint:!0,hintIndex:function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t-1,c=Math.floor(Math.random()*(n-t+1))+t;return c===a?e(t,n,a):c}(0,2,e.hintIndex)})})},n._handleNextClick=function(e){e.preventDefault(),n.props.onNextClick()},n._handleNoteChange=function(e,t){n.setState(function(e,t){return function(n){return Object(y.a)({},n,{notes:Object(y.a)({},n.notes,Object(j.a)({},e,t))})}}(e,t))},n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"_getNote",value:function(e,t){return z(t)?e.root:this.state.notes[t]?this.state.notes[t]:Y}},{key:"renderScaleInputs",value:function(e){var t,n=this,a=e.scale.construction.length+1;return d.a.createElement("div",{className:"scaleQuestion__notes"},(t=a,Array.from(Array(t).keys())).map(function(t){return d.a.createElement(T,{key:"note-".concat(t),isRoot:z(t),noteIndex:t,onChange:n._handleNoteChange,note:n._getNote(e,t)})}))}},{key:"renderHint",value:function(e){var t=J(e.scale,e.mode),n=[B(e.root,t).join(" "),B(e.root,t,I).join(" "),t.join("-")];return d.a.createElement("div",{className:"scaleQuestion__hint"},d.a.createElement("h1",null,"Hint"),d.a.createElement("p",null,n[this.state.hintIndex]))}},{key:"renderSolution",value:function(e){var t=L(e),n=this.state.isCorrect?"correct":"wrong",a="scaleQuestion__solution scaleQuestion__solution--".concat(n);return d.a.createElement("div",{className:a},d.a.createElement("h1",null,"Solution"),this.state.isCorrect?d.a.createElement("p",null,"Your solution is correct!"):d.a.createElement("p",null,"Sorry, that's not correct."),d.a.createElement("p",null,t.map(A).join(", ")))}},{key:"render",value:function(){var e=this.props.question.key;return d.a.createElement("div",{className:"scaleQuestion"},d.a.createElement("p",null,"Complete this scale:"),d.a.createElement("h1",null,R(e)),d.a.createElement("form",{onSubmit:this._handleAnswer},this.renderScaleInputs(e),d.a.createElement("button",{onClick:this._handleAnswer,disabled:!this._canBeAnswered&&!this.state.isAnswered},"Answer"),d.a.createElement("button",{onClick:this._handleHintClick},"Hint"),d.a.createElement("button",{onClick:this._handleNextClick},"Next"),this.state.showHint&&this.renderHint(e),this.state.isAnswered&&this.renderSolution(e)))}},{key:"_canBeAnswered",get:function(){var e=this,t=Object.keys(this.state.notes),n=t.length,a=this.props.question.key.scale.construction.length-1,c=t.some(function(t){var n=e.state.notes[t];return n.pitch&&M.includes(n.pitch)&&n.accidental&&_.includes(n.accidental)});return n===a&&c}}]),t}(s.Component);function z(e){return 0===e||7===e}var K=[w("B",C),w("C",k),w("E",C),w("F",k)];function V(e,t,n){var a=function(e,t){var n=G;e&&(n=Object(g.a)(n).concat([P]));t&&(n=Object(g.a)(n).concat([q]));return X(n)}(t,n),c=e?function(e){return X(e.modes)}(a):a.modes[0];return{root:function e(){var t={pitch:X(M),accidental:X(_)};if(n=t,!K.map(function(e){return N(e,n)}).some(function(e){return!e}))return e();var n;return t}(),scale:a,mode:c}}function X(e){return e[Math.floor(Math.random()*e.length)]}n(22);var Z=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).state={question:void 0,includeModes:ee("includeModes"),includeHarmonicMinor:ee("includeHarmonicMinor"),includeMelodicMinor:ee("includeMelodicMinor")},n._handleNextClick=function(){n._updateQuestion()},n._handleOptionChange=function(e){var t=e.target.value,a=!n.state[t];n.setState(Object(j.a)({},t,a),n._updateQuestion),localStorage.setItem(t,a)},n._updateQuestion=function(){n.setState(function(e){return{question:(t=e.includeModes,n=e.includeHarmonicMinor,a=e.includeMelodicMinor,{type:"scale",key:V(t,n,a)})};var t,n,a})},n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){this._updateQuestion()}},{key:"renderOptions",value:function(){return d.a.createElement("div",{className:"scaleTrainer__options"},d.a.createElement("label",{htmlFor:"includeModes"},d.a.createElement("input",{type:"checkbox",id:"includeModes",name:"includeModes",value:"includeModes",checked:this.state.includeModes,onChange:this._handleOptionChange}),"Modes"),d.a.createElement("label",{htmlFor:"includeHarmonicMinor"},d.a.createElement("input",{type:"checkbox",id:"includeHarmonicMinor",name:"includeHarmonicMinor",value:"includeHarmonicMinor",checked:this.state.includeHarmonicMinor,onChange:this._handleOptionChange}),"Harmonic Minor"),d.a.createElement("label",{htmlFor:"includeMelodicMinor"},d.a.createElement("input",{type:"checkbox",id:"includeMelodicMinor",name:"includeMelodicMinor",value:"includeMelodicMinor",checked:this.state.includeMelodicMinor,onChange:this._handleOptionChange}),"Melodic Minor"))}},{key:"render",value:function(){var e=this.state.question;return d.a.createElement(d.a.Fragment,null,this.renderOptions(),e&&"scale"===e.type?d.a.createElement($,{key:function(e){return"".concat(e.type).concat(R(e.key))}(e),question:e,onNextClick:this._handleNextClick}):d.a.createElement("div",null,"Loading..."))}}]),t}(s.Component);function ee(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=localStorage.getItem(e);return"undefined"===typeof n?t:"true"===n}var te=function(e){function t(){return Object(p.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"app"},d.a.createElement(Z,null))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(d.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.c1f680b1.chunk.js.map