(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(24)},16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a,c,i,r,o,l,u,s=n(0),d=n.n(s),h=n(10),m=n.n(h),p=(n(16),n(4)),f=n(5),v=n(7),b=n(6),O=n(8),j=(n(18),n(1)),y=n(2),g=n(3),_=["A","B","C","D","E","F","G"],k="\u266f",E="\u266e",C="\u266d",A=[C,k,E];function M(e){return e.pitch+((t=e.accidental)===E?"":t);var t}function w(e,t){return{pitch:e,accidental:t||E}}function H(e){var t=(_.indexOf(e)+_.length-1)%_.length;return _[t]}function x(e){var t=(_.indexOf(e)+1)%_.length;return _[t]}function W(e){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:k)===C){if(e.accidental===k)return{pitch:x(e.pitch),accidental:"B"===e.pitch||"E"===e.pitch?E:C};if(e.accidental===C&&("C"===e.pitch||"F"===e.pitch))return{pitch:H(e.pitch),accidental:E}}else{if(e.accidental===C)return{pitch:H(e.pitch),accidental:"C"===e.pitch||"F"===e.pitch?E:k};if(e.accidental===k&&("B"===e.pitch||"E"===e.pitch))return{pitch:x(e.pitch),accidental:E}}return e}function N(e,t){var n=W(e),a=W(t);return function(e,t){return e.pitch===t.pitch}(n,a)&&function(e,t){return e.accidental===t.accidental}(n,a)}var F=["P1","m2","M2","m3","M3","P4","P5","m6","M6","m7","M7","P8"],Q=["d2","A1","d3","A2","d4","A3","d5","A4","d6","A5","d7","A6","d8","A7"],S={P1:0,d2:0,m2:1,A1:1,semitone:1,"half tone":1,"half step":1,H:1,M2:2,d3:2,tone:2,"whole tone":2,"whole step":2,W:2,m3:3,A2:3,M3:4,d4:4,P4:5,A3:5,d5:6,A4:6,tritone:6,P5:7,d6:7,m6:8,A5:8,M6:9,d7:9,m7:10,A6:10,M7:11,d8:11,P8:12,A7:12},B={A:(a={},Object(j.a)(a,C,w("A")),Object(j.a)(a,E,w("A",k)),Object(j.a)(a,k,w("B")),a),B:(c={},Object(j.a)(c,C,w("B")),Object(j.a)(c,E,w("C")),Object(j.a)(c,k,w("C",k)),c),C:(i={},Object(j.a)(i,C,w("C")),Object(j.a)(i,E,w("C",k)),Object(j.a)(i,k,w("D")),i),D:(r={},Object(j.a)(r,C,w("D")),Object(j.a)(r,E,w("D",k)),Object(j.a)(r,k,w("E")),r),E:(o={},Object(j.a)(o,C,w("E")),Object(j.a)(o,E,w("F")),Object(j.a)(o,k,w("F",k)),o),F:(l={},Object(j.a)(l,C,w("F")),Object(j.a)(l,E,w("F",k)),Object(j.a)(l,k,w("G")),l),G:(u={},Object(j.a)(u,C,w("G")),Object(j.a)(u,E,w("G",k)),Object(j.a)(u,k,w("A")),u)};function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F,a=-1;return t.reduce(function(e,t){return a+=S[t],Object(y.a)(e).concat([n[a]])},[])}var D=["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian"],I={name:"harmonic minor",construction:["W","H","W","W","H","A2","H"],modes:["harmonic minor","locrian \u266f6","ionian \u266f5","dorian \u266f4","phrygian dominant","lydian \u266f2","ultralocrian"]},q={name:"melodic minor",construction:["W","H","W","W","W","W","H"],modes:["melodic minor","dorian \u266d2","lydian \u266f5","lydian \u266d7","mixolydian \u266d6","locrian \u266f2","superlocrian"]},G=[{name:"major",construction:["W","W","H","W","W","W","H"],modes:D},{name:"minor",construction:["W","H","W","W","H","W","W"],modes:D}];function J(e){return"".concat(M(e.root)," ").concat((t=e.scale,t.name)," ").concat(function(e,t){var n=t.modes.indexOf(e);return 0===n?"":"".concat(e," (mode ").concat(n+1," of ").concat(t.name,")")}(e.mode,e.scale)).trim();var t}function L(e,t){return function(e,t){var n=e.length;return e.map(function(a,c){return e[((t+c)%n+n)%n]})}(e.construction,e.modes.indexOf(t))}function U(e){return Object(y.a)(L(e.scale,e.mode).slice(0,-1).reduce(function(t,n){var a=function(e,t){for(var n="number"===typeof t?t:S[t],a=e,c=0;c<n;c++)a=B[a.pitch][a.accidental];return a}(t[t.length-1],n);return Object(y.a)(t).concat([W(a,e.root.accidental)])},[e.root])).concat([e.root])}n(20);var T=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).state={pitches:{},accidentals:{},isAnswered:!1,isCorrect:!1,showHint:!1},n._handleAnswer=function(e){e.preventDefault(),n._canBeAnswered&&n.setState(function(e,t){var n,a,c=U(t.question.key),i=c[0],r=Object.keys(e.pitches).map(function(t){return{pitch:e.pitches[Number(t)],accidental:e.accidentals[Number(t)]||E}}),o=[i].concat(Object(y.a)(r),[i]);return Object(g.a)({},e,{isAnswered:!0,isCorrect:(n=c,a=o,n.length===a.length&&!n.map(function(e,t){return N(e,a[t])}).some(function(e){return!e}))})})},n._handleHintClick=function(e){e.preventDefault(),n.setState(function(e){return Object(g.a)({},e,{showHint:!0,hintIndex:function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t-1,c=Math.floor(Math.random()*(n-t+1))+t;return c===a?e(t,n,a):c}(0,2,e.hintIndex)})})},n._handleNextClick=function(e){e.preventDefault(),n.props.onNextClick()},n._createHandlePitchChange=function(e){return function(t){t.preventDefault(),n.setState(function(e,t){return function(n){var a=Object(g.a)({},n.pitches,Object(j.a)({},e,t));return""===t&&delete a[e],Object(g.a)({},n,{pitches:a})}}(e,function(e){var t=e.toUpperCase();return _.includes(t)?t:""}(t.target.value.toUpperCase())))}},n._createHandleAccidentalChange=function(e,t){return function(a){n.setState(function(e,t){return function(n){return Object(g.a)({},n,{accidentals:Object(g.a)({},n.accidentals,Object(j.a)({},e,t))})}}(e,t))}},n._getAccidental=function(e){return n.state.accidentals[e]?n.state.accidentals[e]:E},n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"_getPitch",value:function(e){return this.state.pitches[e]?this.state.pitches[e]:""}},{key:"renderAccidentalInputs",value:function(e,t){var n=this;return A.map(function(a,c){var i="note-".concat(e,"-accidental"),r=0===e||7===e,o=r?t.root.accidental===a:n._getAccidental(e)===a;return d.a.createElement("div",{className:"scaleQuestion__accidental",key:"".concat(i,"-").concat(c)},d.a.createElement("label",{htmlFor:i},d.a.createElement("input",{type:"radio",name:i,value:a,checked:o,onChange:n._createHandleAccidentalChange(e,a),disabled:r}),a))})}},{key:"renderScaleInputs",value:function(e){var t,n=this,a=e.scale.construction.length+1;return d.a.createElement("div",{className:"scaleQuestion__notes"},(t=a,Array.from(Array(t).keys())).map(function(t){var a=0===t||7===t,c=a?e.root.pitch:n._getPitch(t);return d.a.createElement("div",{className:"scaleQuestion__note",key:"note-".concat(t)},d.a.createElement("div",{className:"scaleQuestion__pitch"},d.a.createElement("input",{type:"text",name:"note-".concat(t,"-pitch"),value:c,disabled:a,tabIndex:t,autoFocus:1===t,onChange:n._createHandlePitchChange(t),maxLength:1})),d.a.createElement("div",{className:"scaleQuestion__accidentals"},n.renderAccidentalInputs(t,e)))}))}},{key:"renderHint",value:function(e){var t=L(e.scale,e.mode),n=[P(e.root,t).join(" "),P(e.root,t,Q).join(" "),t.join("-")];return d.a.createElement("div",{className:"scaleQuestion__hint"},d.a.createElement("h1",null,"Hint"),d.a.createElement("p",null,n[this.state.hintIndex]))}},{key:"renderSolution",value:function(e){var t=U(e),n=this.state.isCorrect?"correct":"wrong",a="scaleQuestion__solution scaleQuestion__solution--".concat(n);return d.a.createElement("div",{className:a},d.a.createElement("h1",null,"Solution"),this.state.isCorrect?d.a.createElement("p",null,"Your solution is correct!"):d.a.createElement("p",null,"Sorry, that's not correct."),d.a.createElement("p",null,t.map(M).join(", ")))}},{key:"render",value:function(){var e=this.props.question.key;return d.a.createElement("div",{className:"scaleQuestion"},d.a.createElement("p",null,"Complete this scale:"),d.a.createElement("h1",null,J(e)),d.a.createElement("form",{onSubmit:this._handleAnswer},this.renderScaleInputs(e),d.a.createElement("button",{onClick:this._handleAnswer,disabled:!this._canBeAnswered&&!this.state.isAnswered},"Answer"),d.a.createElement("button",{onClick:this._handleHintClick},"Hint"),d.a.createElement("button",{onClick:this._handleNextClick},"Next"),this.state.showHint&&this.renderHint(e),this.state.isAnswered&&this.renderSolution(e)))}},{key:"_canBeAnswered",get:function(){return Object.keys(this.state.pitches).length===this.props.question.key.scale.construction.length-1}}]),t}(s.Component);var Y=[w("B",k),w("C",C),w("E",k),w("F",C)];function $(e,t,n){var a=function(e,t){var n=G;e&&(n=Object(y.a)(n).concat([I]));t&&(n=Object(y.a)(n).concat([q]));return z(n)}(t,n),c=e?function(e){return z(e.modes)}(a):a.modes[0];return{root:function e(){var t={pitch:z(_),accidental:z(A)};if(n=t,!Y.map(function(e){return N(e,n)}).some(function(e){return!e}))return e();var n;return t}(),scale:a,mode:c}}function z(e){return e[Math.floor(Math.random()*e.length)]}n(22);var K=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).state={question:void 0,includeModes:!0,includeHarmonicMinor:!0,includeMelodicMinor:!0},n._handleNextClick=function(){n._updateQuestion()},n._handleOptionChange=function(e){var t=e.target.value;n.setState(Object(j.a)({},t,!n.state[t]),n._updateQuestion)},n._updateQuestion=function(){n.setState(function(e){return{question:(t=e.includeModes,n=e.includeHarmonicMinor,a=e.includeMelodicMinor,{type:"scale",key:$(t,n,a)})};var t,n,a})},n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){this._updateQuestion()}},{key:"renderOptions",value:function(){return d.a.createElement("div",{className:"scaleTrainer__options"},d.a.createElement("label",{htmlFor:"includeModes"},d.a.createElement("input",{type:"checkbox",name:"includeModes",value:"includeModes",checked:this.state.includeModes,onChange:this._handleOptionChange}),"Modes"),d.a.createElement("label",{htmlFor:"includeHarmonicMinor"},d.a.createElement("input",{type:"checkbox",name:"includeHarmonicMinor",value:"includeHarmonicMinor",checked:this.state.includeHarmonicMinor,onChange:this._handleOptionChange}),"Harmonic Minor"),d.a.createElement("label",{htmlFor:"includeMelodicMinor"},d.a.createElement("input",{type:"checkbox",name:"includeMelodicMinor",value:"includeMelodicMinor",checked:this.state.includeMelodicMinor,onChange:this._handleOptionChange}),"Melodic Minor"))}},{key:"render",value:function(){var e=this.state.question;return d.a.createElement(d.a.Fragment,null,this.renderOptions(),e&&"scale"===e.type?d.a.createElement(T,{key:function(e){return"".concat(e.type).concat(J(e.key))}(e),question:e,onNextClick:this._handleNextClick}):d.a.createElement("div",null,"Loading..."))}}]),t}(s.Component);var R=function(e){function t(){return Object(p.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"app"},d.a.createElement(K,null))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(d.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.68f7f0b5.chunk.js.map