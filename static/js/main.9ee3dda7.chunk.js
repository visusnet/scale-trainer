(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(38)},23:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a,c,i,o,r,s,l,u=n(0),d=n.n(u),h=n(13),m=n.n(h),f=(n(23),n(3)),p=n(4),v=n(8),b=n(7),g=n(9),O=(n(25),n(1)),y=n(2),j=n(6),A=["A","B","C","D","E","F","G"],k="\u266e",E="\u266d",w=[E,"\u266f",k],_=function(){function e(t,n){Object(f.a)(this,e),this.pitch=t,this.accidental=n}return Object(p.a)(e,[{key:"equals",value:function(e){var t=this.normalizeAccidentals(),n=e.normalizeAccidentals();return t.hasEqualPitch(n)&&t.hasEqualAccidental(n)}},{key:"hasEqualPitch",value:function(e){return this.pitch===e.pitch}},{key:"hasEqualAccidental",value:function(e){return this.accidental===e.accidental}},{key:"normalizeAccidentals",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u266f")===E){if("\u266f"===this.accidental)return C(H(this.pitch),"B"===this.pitch||"E"===this.pitch?k:E);if(this.accidental===E&&("C"===this.pitch||"F"===this.pitch))return C(N(this.pitch),k)}else{if(this.accidental===E)return C(N(this.pitch),"C"===this.pitch||"F"===this.pitch?k:"\u266f");if("\u266f"===this.accidental&&("B"===this.pitch||"E"===this.pitch))return C(H(this.pitch),k)}return this}},{key:"toString",value:function(){return e.noteToString(this)}}],[{key:"accidentalToString",value:function(e){return e===k?"":e}},{key:"noteToString",value:function(t){return t.pitch+e.accidentalToString(t.accidental)}},{key:"areNoteArraysEqual",value:function(e,t){return e.length===t.length&&!e.map(function(e,n){var a=t[n];return e.equals(a)}).some(function(e){return!e})}}]),e}();function C(e,t){return new _(e,t||k)}function N(e){var t=(A.indexOf(e)+A.length-1)%A.length;return A[t]}function H(e){var t=(A.indexOf(e)+1)%A.length;return A[t]}var S=["P1","m2","M2","m3","M3","P4","P5","m6","M6","m7","M7","P8"],W=["d2","A1","d3","A2","d4","A3","d5","A4","d6","A5","d7","A6","d8","A7"],x={P1:0,d2:0,m2:1,A1:1,semitone:1,"half tone":1,"half step":1,H:1,M2:2,d3:2,tone:2,"whole tone":2,"whole step":2,W:2,m3:3,A2:3,M3:4,d4:4,P4:5,A3:5,d5:6,A4:6,tritone:6,P5:7,d6:7,m6:8,A5:8,M6:9,d7:9,m7:10,A6:10,M7:11,d8:11,P8:12,A7:12},M={A:(a={},Object(O.a)(a,E,C("A")),Object(O.a)(a,k,C("A","\u266f")),Object(O.a)(a,"\u266f",C("B")),a),B:(c={},Object(O.a)(c,E,C("B")),Object(O.a)(c,k,C("C")),Object(O.a)(c,"\u266f",C("C","\u266f")),c),C:(i={},Object(O.a)(i,E,C("C")),Object(O.a)(i,k,C("C","\u266f")),Object(O.a)(i,"\u266f",C("D")),i),D:(o={},Object(O.a)(o,E,C("D")),Object(O.a)(o,k,C("D","\u266f")),Object(O.a)(o,"\u266f",C("E")),o),E:(r={},Object(O.a)(r,E,C("E")),Object(O.a)(r,k,C("F")),Object(O.a)(r,"\u266f",C("F","\u266f")),r),F:(s={},Object(O.a)(s,E,C("F")),Object(O.a)(s,k,C("F","\u266f")),Object(O.a)(s,"\u266f",C("G")),s),G:(l={},Object(O.a)(l,E,C("G")),Object(O.a)(l,k,C("G","\u266f")),Object(O.a)(l,"\u266f",C("A")),l)};function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S,a=-1;return t.reduce(function(e,t){return a+=x[t],Object(j.a)(e).concat([n[a]])},[])}var F=["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian"],I=[],Q=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;Object(f.a)(this,e),this.name=t,this.construction=n,this.modes=a}return Object(p.a)(e,[{key:"toString",value:function(){return this.name}}]),e}(),B=["W","W","H","W","W","W","H"],P=["W","H","W","W","H","W","W"],D=["W","H","W","W","W","W","H"],T=["H","H","H","H","H","H","H","H","H","H","H","H"],G=["A2","H","A2","H","A2","H"],z=["W","H","H","A2","W","A2"],J=["A2","W","H","H","A2","H"],R=["W","W","A2","W","A2"],L=["A2","W","W","A2","W"],U=new Q("harmonic minor",["W","H","W","W","H","A2","H"],["harmonic minor","locrian \u266f6","ionian \u266f5","dorian \u266f4","phrygian dominant","lydian \u266f2","ultralocrian"]),Y=new Q("melodic minor",D,["melodic minor","dorian \u266d2","lydian \u266f5","lydian \u266d7","mixolydian \u266d6","locrian \u266f2","superlocrian"]),$=new Q("major",B,F),K=new Q("minor",P,F),V=new Q("chromatic",T),X=new Q("augmented",G),Z=new Q("major blues",z),ee=new Q("minor blues",J),te=new Q("major pentatonic",R),ne=new Q("minor pentatonic",L),ae=[$,K,U,Y,V,X,Z,ee,te,ne];function ce(e){return ae.find(function(t){return t.name===e})}var ie=function(){function e(t,n,a){Object(f.a)(this,e),this.root=t,this.scale=n,this.mode=a}return Object(p.a)(e,[{key:"toNotes",value:function(){var e=this;return Object(j.a)(this.modeConstruction.slice(0,-1).reduce(function(t,n){var a=function(e,t){for(var n="number"===typeof t?t:x[t],a=e,c=0;c<n;c++)a=M[a.pitch][a.accidental];return a}(t[t.length-1],n);return Object(j.a)(t).concat([a.normalizeAccidentals(e.root.accidental)])},[this.root])).concat([this.root])}},{key:"toString",value:function(){return"".concat(this.root," ").concat(this.scale," ").concat(this.modeName).trim()}},{key:"modeName",get:function(){if(0===this.scale.modes.length)return"";var e=this.scale.modes.indexOf(this.mode);return 0===e?"":"".concat(this.mode," (mode ").concat(e+1," of ").concat(this.scale.name,")")}},{key:"modeConstruction",get:function(){return this.mode?function(e,t){var n=e.length;return e.map(function(a,c){return e[((t+c)%n+n)%n]})}(this.scale.construction,this.scale.modes.indexOf(this.mode)):this.scale.construction}}]),e}();n(27);function oe(e){var t=e.accidental,n=e.accidentalIndex,a=e.isCurrentAccidental,c=e.isRoot,i=e.noteIndex,o=e.onChange,r="note-".concat(i,"-accidental-").concat(n);return d.a.createElement("div",{className:"scaleQuestion__accidental"},d.a.createElement("label",{htmlFor:r},d.a.createElement("input",{type:"radio",id:r,name:r,value:t,checked:a,onChange:function(e,t,n){return function(){n(e,t)}}(i,t,o),disabled:c}),t))}function re(e){var t=e.isRoot,n=e.noteIndex,a=e.onChange,c=e.note,i="scaleQuestion__note".concat(e.showError?" scaleQuestion__note--error":"");return d.a.createElement("div",{className:i,key:"note-".concat(n)},d.a.createElement("div",{className:"scaleQuestion__pitch"},d.a.createElement("input",{type:"text",name:"note-".concat(n,"-pitch"),value:c.pitch||"",disabled:t,tabIndex:n,autoFocus:1===n,onChange:function(e,t,n){return function(a){a.preventDefault();var c=C(function(e){var t=e.toUpperCase();return A.includes(t)?t:""}(a.target.value.toUpperCase()),t);n(e,c)}}(n,c.accidental,a),maxLength:1})),d.a.createElement("div",{className:"scaleQuestion__accidentals"},w.map(function(e,i){return d.a.createElement(oe,{key:"note-".concat(n,"-accidental-").concat(i),accidental:e,accidentalIndex:i,isCurrentAccidental:c.accidental===e,isRoot:t,noteIndex:n,onChange:function(e,t,n,a){return function(){var c=C(t,n);a(e,c)}}(n,c.pitch,e,a)})})))}var se=n(14),le=n.n(se),ue={accidental:k},de=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).state={notes:{},correctNotes:{},isAnswered:!1,isCorrect:!1,showErrors:!1,showHint:!1},n._handleAnswer=function(e){e.preventDefault(),n._canBeAnswered&&n.setState(function(e,t){var n=t.question.key.toNotes(),a=n[0],c=Object.keys(e.notes).map(function(t){return e.notes[t]}),i=[a].concat(Object(j.a)(c),[a]);return Object(y.a)({},e,{isAnswered:!0,showErrors:!0,showHint:!1,isCorrect:_.areNoteArraysEqual(n,i)})})},n._handleHintClick=function(e){e.preventDefault(),n.setState(function(e){return Object(y.a)({},e,{showHint:!0,isCorrect:!1,hintIndex:function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t-1,c=Math.floor(Math.random()*(n-t+1))+t;return c===a?e(t,n,a):c}(0,2,e.hintIndex)})})},n._handleNextClick=function(e){e.preventDefault(),n.props.onNextClick()},n._handleNoteChange=function(e,t){var a=n.props.question.key.toNotes();n.setState(function(e,t,n){return function(a){return Object(y.a)({},a,{notes:Object(y.a)({},a.notes,Object(O.a)({},e,t)),correctNotes:Object(y.a)({},a.correctNotes,Object(O.a)({},e,n)),showErrors:!1})}}(e,t,a[e].equals(t)))},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"_getNote",value:function(e,t){return he(e,t)?e.root:this.state.notes[t]?this.state.notes[t]:ue}},{key:"renderScaleInputs",value:function(e){var t,n=this,a=e.scale.construction.length+1;e.toNotes();return d.a.createElement("div",{className:"scaleQuestion__notes"},(t=a,Array.from(Array(t).keys())).map(function(t){var a=n._getNote(e,t),c=he(e,t),i=!c&&n.state.showErrors&&!n.state.correctNotes[t];return d.a.createElement(re,{key:"note-".concat(t),isRoot:c,noteIndex:t,onChange:n._handleNoteChange,note:a,showError:i})}))}},{key:"renderFretboard",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return d.a.createElement("div",{className:"scaleQuestion__fretboard"},d.a.createElement(le.a,{skinType:"strings",selectedNotes:this.props.question.key.toNotes().map(me),showSelectionLabels:e}))}},{key:"renderHint",value:function(e){var t=e.modeConstruction,n=[q(e.root,t).join(" "),q(e.root,t,W).join(" "),t.join("-")];return d.a.createElement("div",{className:"scaleQuestion__hint"},d.a.createElement("h1",null,"Hint"),d.a.createElement("p",null,n[this.state.hintIndex]),this.renderFretboard(!1))}},{key:"renderSolution",value:function(e){var t=e.toNotes(),n=this.state.isCorrect?"correct":"wrong",a="scaleQuestion__solution scaleQuestion__solution--".concat(n);return d.a.createElement("div",{className:a},d.a.createElement("h1",null,this.state.isCorrect?"Awesome!":"Wrong"),d.a.createElement("p",null,this.state.isCorrect?"Your solution is correct!":"This would have been the correct answer: ".concat(t.map(_.noteToString).join(" "))),this.renderFretboard())}},{key:"renderActions",value:function(){var e=!this._canBeAnswered&&!this.state.isAnswered,t=this.state.isAnswered;return d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{onClick:this._handleAnswer,disabled:e},"Answer"),d.a.createElement("button",{onClick:this._handleyHintClick,disabled:t},"Hint"),d.a.createElement("button",{onClick:this._handleNextClick},"Next"))}},{key:"render",value:function(){var e=this.props.question.key;return d.a.createElement("div",{className:"scaleQuestion"},d.a.createElement("p",null,"Complete this scale:"),d.a.createElement("h1",{className:"scaleQuestion__scaleName"},String(e)),d.a.createElement("form",{onSubmit:this._handleAnswer},this.renderScaleInputs(e),this.renderActions(),this.state.showHint&&this.renderHint(e),this.state.isAnswered&&this.renderSolution(e)))}},{key:"_canBeAnswered",get:function(){var e=this,t=Object.keys(this.state.notes),n=t.length,a=this.props.question.key.scale.construction.length-1,c=t.some(function(t){var n=e.state.notes[t];return n.pitch&&A.includes(n.pitch)&&n.accidental&&w.includes(n.accidental)});return n===a&&c}}]),t}(u.Component);function he(e,t){return 0===t||t===e.scale.construction.length}function me(e){var t=e.accidental===k?"":e.accidental===E?"b":"#";return e.pitch+t}var fe=[C("B","\u266f"),C("C",E),C("E","\u266f"),C("F",E)];function pe(e,t,n){var a=function(e){return ve(function(e){return Object.keys(e).reduce(function(t,n){return e[n]?Object(j.a)(t).concat([n]):t},[])}(e).map(ce))}(n),c=a.modes.length>0?t?function(e){return ve(e.modes)}(a):a.modes[0]:void 0;return new ie(function e(t){var n=C(ve(A),t?ve(w):k);if(function(e){return!fe.map(function(t){return t.equals(e)}).some(function(e){return!e})}(n))return e();return n}(e),a,c)}function ve(e){return e[Math.floor(Math.random()*e.length)]}n(36);var be=ae.reduce(function(e,t){return Object(y.a)({},e,Object(O.a)({},t.name,!0))},{}),ge=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).state={question:void 0,options:{includeAccidentals:Oe("includeAccidentals"),includeModes:Oe("includeModes"),scales:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=localStorage.getItem(e);if(null===n||"undefined"===typeof n)return t;return Object(y.a)({},t,JSON.parse(n))}("scales",be)}},n._handleNextClick=function(){n._updateQuestion()},n._handleOptionChange=function(e){var t=e.target.value,a=!n.state.options[t];n.setState(function(e,t){return function(n){return localStorage.setItem(e,t),Object(y.a)({},n,{options:Object(y.a)({},n.options,Object(O.a)({},e,t))})}}(t,a),n._updateQuestion)},n._handleScaleOptionChange=function(e){var t=e.target.value,a=!n.state.options.scales[t];n.setState(function(e,t){return function(n){var a=Object(y.a)({},n.options.scales);a[e]=t;var c=!Object.keys(a).some(function(e){return a[e]});return c&&(a[$.name]=!0),localStorage.setItem("scales",JSON.stringify(a)),Object(y.a)({},n,{options:Object(y.a)({},n.options,{scales:a})})}}(t,a),n._updateQuestion)},n._updateQuestion=function(){n.setState(function(e){return{question:(t=e.options.includeAccidentals,n=e.options.includeModes,a=e.options.scales,{type:"scale",key:pe(t,n,a)})};var t,n,a})},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this._updateQuestion()}},{key:"renderOptions",value:function(){var e=this,t=this._onlyMajorScaleSelected;return d.a.createElement("div",{className:"scaleTrainer__options"},d.a.createElement("fieldset",null,d.a.createElement("legend",null,"Notes"),d.a.createElement("label",{htmlFor:"includeAccidentals"},d.a.createElement("input",{type:"checkbox",id:"includeAccidentals",name:"includeAccidentals",value:"includeAccidentals",checked:this.state.options.includeAccidentals,onChange:this._handleOptionChange}),"Accidentals")),d.a.createElement("fieldset",null,d.a.createElement("legend",null,"Scales"),d.a.createElement("div",{className:"scaleTrainer__scales"},ae.map(function(n){return d.a.createElement("label",{htmlFor:n.name,key:n.name},d.a.createElement("input",{type:"checkbox",id:n.name,name:n.name,value:n.name,checked:e.state.options.scales[n.name],disabled:t&&n.name===$.name,onChange:e._handleScaleOptionChange}),n.name)}))),d.a.createElement("fieldset",null,d.a.createElement("legend",null,"Modes"),d.a.createElement("label",{htmlFor:"includeModes"},d.a.createElement("input",{type:"checkbox",id:"includeModes",name:"includeModes",value:"includeModes",checked:this.state.options.includeModes,onChange:this._handleOptionChange}),"Modes")))}},{key:"render",value:function(){var e=this.state.question;return d.a.createElement(d.a.Fragment,null,this.renderOptions(),e&&"scale"===e.type?d.a.createElement(de,{key:function(e){return"".concat(e.type).concat(e.key)}(e),question:e,onNextClick:this._handleNextClick}):d.a.createElement("div",null,"Loading..."))}},{key:"_onlyMajorScaleSelected",get:function(){var e=this.state.options.scales;return 1===Object.keys(e).reduce(function(t,n){return e[n]?t+1:t},0)&&e[$.name]}}]),t}(u.Component);function Oe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=localStorage.getItem(e);return null===n||"undefined"===typeof n?t:"true"===n}var ye=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"app"},d.a.createElement(ge,null))}}]),t}(u.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(d.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,2,1]]]);
//# sourceMappingURL=main.9ee3dda7.chunk.js.map